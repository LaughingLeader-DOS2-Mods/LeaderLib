Version 1
SubGoalCombiner SGC_AND
INITSECTION
KBSECTION
/* [OSITOOLS_ONLY]
IF
NRD_OnActionStateEnter(_Char, "PrepareSkill")
AND
NRD_ActionStateGetString(_Char, "SkillId", _SkillPrototype)
AND
NOT DB_LeaderLib_LuaSkillListeners_Ignore(_Char, _SkillPrototype, (STRING)_)
THEN
NRD_ModCall("LeaderLib", "OnSkillPreparing", (STRING)_Char, _SkillPrototype);

IF
CharacterUsedSkill(_Char, _Skill, _SkillType, _SkillElement)
AND
NOT DB_LeaderLib_LuaSkillListeners_Ignore(_Char, _, _Skill)
THEN
NRD_ModCall("LeaderLib", "OnSkillUsed", (STRING)_Char, _Skill);

IF
CharacterUsedSkillOnTarget(_Char, _Target, _Skill, _SkillType, _SkillElement)
AND
NOT DB_LeaderLib_LuaSkillListeners_Ignore(_Char, _, _Skill)
THEN
NRD_ModCall("LeaderLib", "OnSkillUsed", (STRING)_Char, _Skill, (STRING)_Target);

IF
CharacterUsedSkillAtPosition(_Char, _x, _y, _z, _Skill, _SkillType, _SkillElement)
AND
NOT DB_LeaderLib_LuaSkillListeners_Ignore(_Char, _, _Skill)
THEN
NRD_ModCall("LeaderLib", "OnSkillUsed", (STRING)_Char, _Skill, (STRING)_x, (STRING)_y, (STRING)_z);

IF
CharacterUsedSkillOnZoneWithTarget(_Char, _Target, _Skill, _SkillType, _SkillElement)
AND
NOT DB_LeaderLib_LuaSkillListeners_Ignore(_Char, _, _Skill)
THEN
NRD_ModCall("LeaderLib", "OnSkillUsed", (STRING)_Char, _Skill, (STRING)_Target);

IF
SkillCast(_Char, _Skill, _SkillType, _SkillElement)
THEN
NRD_ModCall("LeaderLib", "OnSkillCast", (STRING)_Char, _Skill);
*/

// Skill hits are detected with LeaderLib_Ext_OnHit / OnHit in Lua

IF
RegionEnded(_)
THEN
SysClear("DB_LeaderLib_LuaSkillListeners_Ignore", 3);

EXITSECTION
SysClear("DB_LeaderLib_LuaSkillListeners_Ignore", 3);
ENDEXITSECTION
ParentTargetEdge "LeaderLib_19_ToggledScripts"